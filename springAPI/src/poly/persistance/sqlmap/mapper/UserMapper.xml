<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- JAVA와 연결할 Mapper 파일 설정 -->
<mapper namespace="poly.persistance.mapper.IUserMapper">
	<!-- USER INFO 등록 -->
	<insert id="insertUserInfo" parameterType="UserDTO">
		INSERT INTO OnlineCoupon.USER
			(
			 USER_ID,
			 USER_PASSWORD,
			 USER_NAME,
			 USER_NIC,
			 USER_AGE,
			 USER_GENDER
			 )
		VALUES
			(#{user_id},
			 #{user_password},
			 #{user_name},
			 #{user_nic},
			 #{user_age},
			 #{user_gender})
	</insert>

	<!-- 중복 확인 -->
	<select id="getUserExists" parameterType="UserDTO" resultType="UserDTO">
		SELECT IF(COUNT(1) = 0, 'N', 'Y') AS EXISTS_YN
		FROM OnlineCoupon.USER
		WHERE USER_ID = #{user_id}
	</select>

	<!-- 로그인 -->
	<select id="findUserInfo" parameterType="UserDTO" resultType="UserDTO">
		SELECT USER_SEQ, USER_ID, USER_NAME, USER_NIC, USER_AGE, USER_GENDER
		FROM OnlineCoupon.USER
		WHERE USER_ID = #{user_id} AND USER_PASSWORD = #{user_password}
	</select>
	<!-- 사용자 Seq (식별자 값) 가져오기 -->
	<select id="getUserSeq" parameterType="UserDTO" resultType="UserDTO">
		SELECT USER_SEQ
		FROM OnlineCoupon.USER
		WHERE USER_ID = #{user_id}
	</select>


			
</mapper>